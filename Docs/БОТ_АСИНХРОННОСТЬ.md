# Telegram –ë–æ—Ç - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

**–í–æ–ø—Ä–æ—Å:** –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?

**–û—Ç–≤–µ—Ç:** ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –¥–ª—è –í–°–ï–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**

---

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1 ‚Üí /start ‚Üí Telegram API ‚Üí Webhook ‚Üí Vercel Function ‚Üí Bot ‚Üí –û—Ç–≤–µ—Ç
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2 ‚Üí /help  ‚Üí Telegram API ‚Üí Webhook ‚Üí Vercel Function ‚Üí Bot ‚Üí –û—Ç–≤–µ—Ç
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 3 ‚Üí /play  ‚Üí Telegram API ‚Üí Webhook ‚Üí Vercel Function ‚Üí Bot ‚Üí –û—Ç–≤–µ—Ç
                                           ‚Üë
                                    –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!
```

### Vercel Functions

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ—Ç Telegram –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω–æ–π** Vercel Function instance:

```javascript
export async function POST(request: NextRequest) {
  // –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ = –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Ñ—É–Ω–∫—Ü–∏–∏
  const update = await request.json()
  const bot = await getBotInitialized()

  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  await bot.handleUpdate(update)  // ‚Üê –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã

  return NextResponse.json({ ok: true })
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ:**

1. ‚úÖ Vercel —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π instance —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
2. ‚úÖ Grammy (`bot.handleUpdate`) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π update –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
3. ‚úÖ –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
4. ‚úÖ –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

---

## ‚úÖ –ü–æ—á–µ–º—É –±–æ—Ç –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

### 1. Bot Instance - Singleton

```typescript
let botInstance: Bot | null = null

export function getBot(): Bot {
  if (!botInstance) {
    botInstance = new Bot(token)
    // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã –æ–¥–∏–Ω —Ä–∞–∑
  }
  return botInstance // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ—Ç –∂–µ —ç–∫–∑–µ–º–ø–ª—è—Ä
}
```

**Singleton –ù–ï –æ–∑–Ω–∞—á–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É!**

- ‚úÖ –≠–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –æ–¥–∏–Ω
- ‚úÖ –ù–æ –æ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ updates –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- ‚úÖ –ö–∞–∂–¥—ã–π update –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π `Context`

### 2. Grammy Context

```typescript
botInstance.command('start', async ctx => {
  // ctx = –∫–æ–Ω—Ç–µ–∫—Å—Ç –ö–û–ù–ö–†–ï–¢–ù–û–ì–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  // ctx.from.id = —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  // ctx.message = —Å–æ–æ–±—â–µ–Ω–∏–µ –≠–¢–û–ì–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

  await ctx.reply('–ü—Ä–∏–≤–µ—Ç!') // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
})
```

**–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π Context:**

- ‚úÖ `ctx.from` - –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `ctx.message` - —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `ctx.reply()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### 3. Async/Await

```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1 –æ—Ç–ø—Ä–∞–≤–∏–ª /start
await handleStartCommand(ctx1) // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2 –æ—Ç–ø—Ä–∞–≤–∏–ª /help (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!)
await handleHelpCommand(ctx2) // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!
```

**JavaScript Event Loop:**

- ‚úÖ Async —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- ‚úÖ `await` –æ—Ç–ø—É—Å–∫–∞–µ—Ç –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üß™ –¢–µ—Å—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç 1: –î–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

**–°—Ü–µ–Ω–∞—Ä–∏–π:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start` (–≤ —Ç—É –∂–µ —Å–µ–∫—É–Ω–¥—É)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç
- ‚úÖ –û—Ç–≤–µ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ ~–æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –¥–ª—è –æ–±–æ–∏—Ö

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

```bash
# –í Vercel Logs –≤—ã —É–≤–∏–¥–∏—Ç–µ:
Webhook POST received  # User A
Webhook POST received  # User B (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!)
Processing update...   # User A
Processing update...   # User B (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!)
Update processed       # User A
Update processed       # User B
```

### –¢–µ—Å—Ç 2: –ú–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ä–∞–∑—É

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç `/start` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ –í—Å–µ 10 –ø–æ–ª—É—á–∞—é—Ç –æ—Ç–≤–µ—Ç
- ‚úÖ Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç (—Å–æ–∑–¥–∞–µ—Ç 10 function instances)
- ‚úÖ –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –æ—á–µ—Ä–µ–¥–∏

**Vercel Limits:**

- Free tier: 100 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö requests
- Hobby: 100 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö requests
- Pro: 1000+ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö requests

---

## üîß –ü–æ—á–µ–º—É –Ω–µ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Grammy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω

```typescript
// ‚ùå –ù–ï –ù–£–ñ–ù–û –¥–µ–ª–∞—Ç—å —Ç–∞–∫:
bot.use(async (ctx, next) => {
  // –ö–∞–∫–∞—è-—Ç–æ middleware –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
})

// ‚úÖ Grammy —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!
bot.command('start', handleStartCommand)
```

### Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç

```typescript
// ‚ùå –ù–ï –ù–£–ñ–ù–û:
const workerPool = new WorkerPool(10)
workerPool.handle(request)

// ‚úÖ Vercel —Å–∞–º —Å–æ–∑–¥–∞–µ—Ç instances:
export async function POST(request) {
  // –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å = –Ω–æ–≤—ã–π instance
}
```

### Next.js API Routes –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã

```typescript
// ‚ùå –ù–ï –ù–£–ñ–ù–û:
let isProcessing = false
if (isProcessing) return

// ‚úÖ –ö–∞–∂–¥—ã–π request –Ω–µ–∑–∞–≤–∏—Å–∏–º:
export async function POST(request) {
  // –ù–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
}
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏

### Vercel Functions Dashboard

1. –û—Ç–∫—Ä–æ–π—Ç–µ Vercel ‚Üí Project ‚Üí Functions
2. –ù–∞–π–¥–∏—Ç–µ `/api/bot/webhook`
3. –°–º–æ—Ç—Ä–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏:

**Invocations (–≤—ã–∑–æ–≤—ã):**

```
15:00:01 - 5 requests
15:00:02 - 10 requests
15:00:03 - 3 requests
```

**Concurrent Executions (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è):**

```
Peak: 10 concurrent  ‚Üê –ú–∞–∫—Å–∏–º—É–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö
Average: 3 concurrent
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ **–º–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö** - –∑–Ω–∞—á–∏—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ! ‚úÖ

### –õ–æ–≥–∏ Vercel

```
15:30:45.123 | User 1 | Webhook POST received
15:30:45.150 | User 2 | Webhook POST received  ‚Üê –ß–µ—Ä–µ–∑ 27ms!
15:30:45.180 | User 3 | Webhook POST received  ‚Üê –ß–µ—Ä–µ–∑ 57ms!
15:30:45.500 | User 1 | Update processed       ‚Üê –ü–µ—Ä–≤—ã–π –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
15:30:45.520 | User 2 | Update processed       ‚Üê –í—Ç–æ—Ä–æ–π –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
15:30:45.550 | User 3 | Update processed       ‚Üê –¢—Ä–µ—Ç–∏–π –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
```

**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞!** ‚úÖ

---

## ‚ö†Ô∏è –ß—Ç–æ –º–æ–≥–ª–æ –±—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞ (–ù–û –£ –í–ê–° –≠–¢–û–ì–û –ù–ï–¢)

### ‚ùå –ì–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

```typescript
// ‚ùå –ü–õ–û–•–û (—É –≤–∞—Å —Ç–∞–∫–æ–≥–æ –ù–ï–¢):
let isProcessing = false

export async function POST(request) {
  if (isProcessing) {
    return NextResponse.json({ error: 'Busy' })
  }

  isProcessing = true
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞
  isProcessing = false
}
```

### ‚ùå –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥

```typescript
// ‚ùå –ü–õ–û–•–û (—É –≤–∞—Å —Ç–∞–∫–æ–≥–æ –ù–ï–¢):
export function POST(request) {
  // –ù–ï async!
  const result = processSync() // –ë–ª–æ–∫–∏—Ä—É–µ—Ç
  return NextResponse.json(result)
}
```

### ‚ùå –û–±—â–∏–π —Ä–µ—Å—É—Ä—Å —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π

```typescript
// ‚ùå –ü–õ–û–•–û (—É –≤–∞—Å —Ç–∞–∫–æ–≥–æ –ù–ï–¢):
const queue = []

export async function POST(request) {
  queue.push(request)
  while (queue[0] !== request) {
    await sleep(100) // –ñ–¥–µ—Ç —Å–≤–æ–µ–π –æ—á–µ—Ä–µ–¥–∏
  }
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞
}
```

**–£ –≤–∞—Å –ù–ò–ß–ï–ì–û –∏–∑ —ç—Ç–æ–≥–æ –Ω–µ—Ç!** ‚úÖ

---

## üéØ –ò—Ç–æ–≥

### –í–∞—à –±–æ—Ç:

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –¥–ª—è –í–°–ï–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**

- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π Context
- Grammy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- Vercel —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ function instances
- –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏–ª–∏ –æ—á–µ—Ä–µ–¥–µ–π

‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**

- 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí 1 function instance
- 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí 100 function instances (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!)
- Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç

‚úÖ **–ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫**

- Grammy —É–∂–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω
- Next.js API Routes —É–∂–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã
- Vercel —É–∂–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è

---

## üß™ –ö–∞–∫ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram –Ω–∞ –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞—Ö
2. –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` —Å –æ–±–æ–∏—Ö
3. –û–±–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–∑—É

**–ï—Å–ª–∏ –æ–±–∞ –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ!** ‚úÖ

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç–µ—Å—Ç:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Vercel ‚Üí Functions ‚Üí `/api/bot/webhook`
2. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ 5 –¥—Ä—É–∑–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `/start`
3. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ "Webhook POST received" - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!** ‚úÖ

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

### Grammy Bot Middleware

Grammy –∏—Å–ø–æ–ª—å–∑—É–µ—Ç middleware pattern:

```typescript
bot.command('start', async ctx => {
  // ctx = Context –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
})
```

–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `bot.handleUpdate(update)` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π `Context` –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

### Vercel Serverless Functions

```
Request 1 ‚Üí Function Instance 1 ‚Üí Response 1
Request 2 ‚Üí Function Instance 2 ‚Üí Response 2
Request 3 ‚Üí Function Instance 3 ‚Üí Response 3
            ‚Üë –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!
```

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ instances –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

### Node.js Event Loop

```javascript
async function handle1() {
  await someAsyncOperation() // –û—Ç–ø—É—Å–∫–∞–µ—Ç –ø–æ—Ç–æ–∫
}

async function handle2() {
  await someAsyncOperation() // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!
}
```

`async/await` –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç - Event Loop –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

---

## üîó –°—Å—ã–ª–∫–∏

- [Grammy Documentation - Concurrency](https://grammy.dev/advanced/scaling.html)
- [Vercel Functions - Concurrency](https://vercel.com/docs/functions/runtimes#concurrency)
- [Next.js API Routes](https://nextjs.org/docs/pages/building-your-application/routing/api-routes)

---

**–í—ã–≤–æ–¥: –í–∞—à –±–æ—Ç –£–ñ–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ! –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.** ‚úÖ

–ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏, —ç—Ç–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ:

1. –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–æ–±–ª–µ–º—ã —Å Telegram API
3. –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ù–û –ù–ï –ø—Ä–æ–±–ª–µ–º—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é –±–æ—Ç–∞! üöÄ
